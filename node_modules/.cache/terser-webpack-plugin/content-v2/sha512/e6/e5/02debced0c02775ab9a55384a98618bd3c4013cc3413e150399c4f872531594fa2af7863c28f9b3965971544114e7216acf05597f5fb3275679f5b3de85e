{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{431:function(e,s,t){\"use strict\";t.r(s);var a=t(42),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"romulus-upgrade-instructions\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#romulus-upgrade-instructions\"}},[e._v(\"#\")]),e._v(\" Romulus Upgrade Instructions\")]),e._v(\" \"),t(\"p\",[e._v(\"The \"),t(\"a\",{attrs:{href:\"https://puzzle.report/enigma/chains/enigma-1/governance/proposals/13\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Romulus Upgrade Signal\"),t(\"OutboundLink\")],1),e._v(\" passed on-chain, and this mandates a hard fork.\")]),e._v(\" \"),t(\"p\",[e._v(\"This document describes the steps required to perform the Romulus Upgrade to go from the \"),t(\"code\",[e._v(\"enigma-1\")]),e._v(\" to \"),t(\"code\",[e._v(\"secret-1\")]),e._v(\" chain. The upgrade is\\nrequired for all full-node operators (both validators and non-validators).\")]),e._v(\" \"),t(\"p\",[e._v(\"The Chain of Secrets (CoS) team will post the official modified genesis file, but you'll be able to validate it with a step below.\")]),e._v(\" \"),t(\"p\",[e._v(\"The agreed upon block height for the Romulus Upgrade is \"),t(\"em\",[e._v(\"1,794,500\")]),e._v(\".\")]),e._v(\" \"),t(\"p\",[t(\"em\",[e._v(\"NOTE: Full-nodes includes any Sentry nodes that are part of a validator's network architecture.\")])]),e._v(\" \"),t(\"p\",[e._v(\"This document describes the upgrade in the following sections:\")]),e._v(\" \"),t(\"ul\",[t(\"li\",[e._v(\"Preliminary\")]),e._v(\" \"),t(\"li\",[e._v(\"Risks\")]),e._v(\" \"),t(\"li\",[e._v(\"Recovery\")]),e._v(\" \"),t(\"li\",[e._v(\"Upgrade Procedure\")])]),e._v(\" \"),t(\"h2\",{attrs:{id:\"preliminary\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#preliminary\"}},[e._v(\"#\")]),e._v(\" Preliminary\")]),e._v(\" \"),t(\"p\",[e._v(\"The significant changes in this upgrade are the following:\")]),e._v(\" \"),t(\"ul\",[t(\"li\",[e._v(\"The \"),t(\"em\",[e._v(\"Secret Network\")]),e._v(\" re-branding.\")])]),e._v(\" \"),t(\"p\",[e._v(\"The \"),t(\"code\",[e._v(\"secretcli/secretd\")]),e._v(\" commands change to \"),t(\"code\",[e._v(\"secretcli/secretd\")]),e._v(\".\")]),e._v(\" \"),t(\"p\",[e._v(\"The \"),t(\"code\",[e._v(\"enigma1...\")]),e._v(\" addresses change to \"),t(\"code\",[e._v(\"secret1...\")]),e._v(\". The addresses will go through a bech32 address converter supplied by the Enigma team to properly\\nchange the addresses. You'll see not only the address prefix change, but also the entire address. Wallet keys will then be exported using the\\n\"),t(\"code\",[e._v(\"secretcli\")]),e._v(\" command and imported using \"),t(\"code\",[e._v(\"secretcli\")]),e._v(\". There may seem to be a bit of magic there, but it's been tested and works great!\")]),e._v(\" \"),t(\"ul\",[t(\"li\",[e._v(\"Addition of a tokenswap module.\")])]),e._v(\" \"),t(\"p\",[e._v(\"This module has been added to allow the chain implementation of the \"),t(\"em\",[e._v(\"Burn ENG for SCRT!\")]),e._v(\" proposal: https://puzzle.report/enigma/chains/enigma-1/governance/proposals/4\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"risks\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#risks\"}},[e._v(\"#\")]),e._v(\" Risks\")]),e._v(\" \"),t(\"p\",[e._v(\"To mitigate the risk of jailed/slashed validator addresses causing an issue when starting the new chain, CoS will run a script to modify the\\ngenesis file to ensure the correct staked amounts. This script is being provided by a key contributor to the Secret Network.\")]),e._v(\" \"),t(\"p\",[e._v(\"There is no risk of 'double-signing' unless you have two nodes running the same keys in parallel. Please ensure that is not the case for your nodes.\")]),e._v(\" \"),t(\"p\",[e._v(\"We are using a modified fork of the cosmos-sdk to address issues with using a genesis file created via an \"),t(\"code\",[e._v(\"export\")]),e._v(\". There is a risk that an export\\nof the current chain state may reveal a new issue.\")]),e._v(\" \"),t(\"p\",[e._v(\"If necessary, the network can be relaunched with the old chain \"),t(\"code\",[e._v(\"enigma-1\")]),e._v(\". For this reason do not delete the existing \"),t(\"code\",[e._v(\".secretd\")]),e._v(\" and \"),t(\"code\",[e._v(\".enigmcli\")]),e._v(\"\\ndirectories. See the \"),t(\"em\",[e._v(\"Recovery\")]),e._v(\" section below.\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"recovery\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#recovery\"}},[e._v(\"#\")]),e._v(\" Recovery\")]),e._v(\" \"),t(\"p\",[e._v(\"In the event that something goes wrong and we need to revert back to the old chain, the following steps should be performed by all full-node\\noperators and validators.\")]),e._v(\" \"),t(\"ol\",[t(\"li\",[e._v(\"Stop the \"),t(\"code\",[e._v(\"secret-1\")]),e._v(\" chain if running:\")])]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# may fail, but that's okay\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl stop secret-node\\n\")])])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[e._v(\"Re-start the \"),t(\"code\",[e._v(\"enigma-1\")]),e._v(\" chain:\")])]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"enable\")]),e._v(\" enigma-node\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl start enigma-node\\n\")])])]),t(\"ol\",{attrs:{start:\"3\"}},[t(\"li\",[e._v(\"Monitor the enigma-node (once 2/3 of voting power is online, you'll see blocks streaming):\")])]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"journalctl -u enigma-node -f\\n\")])])]),t(\"p\",[e._v(\"NOTE: you may have to put \"),t(\"code\",[e._v(\"sudo\")]),e._v(\" in front of the \"),t(\"code\",[e._v(\"journalctl\")]),e._v(\" command if you don't have permission to run it.\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"upgrade-procedure\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#upgrade-procedure\"}},[e._v(\"#\")]),e._v(\" Upgrade Procedure\")]),e._v(\" \"),t(\"h3\",{attrs:{id:\"_1-gracefully-halt-the-enigma-1-chain\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-gracefully-halt-the-enigma-1-chain\"}},[e._v(\"#\")]),e._v(\" 1. Gracefully Halt the \"),t(\"code\",[e._v(\"enigma-1\")]),e._v(\" Chain\")]),e._v(\" \"),t(\"p\",[e._v(\"Change the configured halt height in \"),t(\"code\",[e._v(\"app.toml\")]),e._v(\":\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"perl -i -pe \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'s/^halt-height =.*/halt-height = 1794500/'\")]),e._v(\" ~/.secretd/config/app.toml\\n\")])])]),t(\"p\",[e._v('Change the pruning to \"nothing\" instead of \"syncable\":')]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"perl -i -pe \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'s/^pruning =.*/pruning = \\\"nothing\\\"/'\")]),e._v(\" ~/.secretd/config/app.toml\\n\")])])]),t(\"p\",[e._v(\"Change the \"),t(\"code\",[e._v(\"enigma-node\")]),e._v(\" service configuration to restart only on failure (so it doesn't keep trying to restart after the chain halt):\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" perl -i -pe \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'s/^Restart=.*/Restart=on-failure/'\")]),e._v(\" /etc/systemd/system/enigma-node.service\\n\")])])]),t(\"p\",[e._v(\"Display the \"),t(\"code\",[e._v(\"enigma-node\")]),e._v(\" service file:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cat\")]),e._v(\" /etc/systemd/system/enigma-node.service\\n\")])])]),t(\"p\",[e._v(\"It should look similar to below:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"Unit\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"Description\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"Enigma node \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"service\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"After\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"network.target\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"Service\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"Type\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"simple\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"ExecStart\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"/bin/secretd start\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"User\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"ubuntu\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"Restart\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"on-failure\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"StartLimitInterval\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"RestartSec\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"3\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"LimitNOFILE\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"65535\")]),e._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"Install\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"WantedBy\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"multi-user.target\\n\")])])]),t(\"p\",[e._v(\"Reload the \"),t(\"code\",[e._v(\"enigma-node\")]),e._v(\" service configuration:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl daemon-reload\\n\")])])]),t(\"p\",[e._v(\"Restart the \"),t(\"code\",[e._v(\"enigma-node\")]),e._v(\" service and monitor:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl restart enigma-node\\n\")])])]),t(\"p\",[t(\"em\",[e._v(\"The chain will halt at block height \"),t(\"em\",[e._v(\"1794500\")]),e._v(\" at approximately 9am PDT, 12pm EDT and 4pm UTC.\")])]),e._v(\" \"),t(\"p\",[e._v(\"You may see dialing and connection errors as nodes are halted, which is expected. When the node is finally stopped, you'll see these messages:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"halting node per configuration\\n\\n\\nexiting\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"..\")]),e._v(\". \\n\")])])]),t(\"h3\",{attrs:{id:\"_2-migrate-genesis\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-migrate-genesis\"}},[e._v(\"#\")]),e._v(\" 2. Migrate Genesis\")]),e._v(\" \"),t(\"p\",[e._v(\"*** NOTE: \"),t(\"em\",[e._v(\"Chain of Secrets\")]),e._v(\" performs these steps! ***\")]),e._v(\" \"),t(\"p\",[e._v(\"CoS will notify mainnet validators and full-node operators when this step is complete.\")]),e._v(\" \"),t(\"p\",[e._v(\"It is recommended that participants go through the steps to independently verify the migrated genesis file.\")]),e._v(\" \"),t(\"p\",[e._v(\"See the \"),t(\"a\",{attrs:{href:\"#addendum\"}},[e._v(\"Addendum\")]),e._v(\" for detailed instructions.\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"all-full-node-operators-and-validators\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#all-full-node-operators-and-validators\"}},[e._v(\"#\")]),e._v(\" All Full-Node Operators and Validators\")]),e._v(\" \"),t(\"h3\",{attrs:{id:\"_3-setup-secret-network\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-setup-secret-network\"}},[e._v(\"#\")]),e._v(\" 3. Setup Secret Network\")]),e._v(\" \"),t(\"p\",[e._v(\"Get the \"),t(\"code\",[e._v(\"secretnetwork\")]),e._v(\" release:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"wget\")]),e._v(\" https://github.com/chainofsecrets/TheRomulusUpgrade/releases/download/v0.2.0/secretnetwork_0.2.0_amd64.deb\\n\")])])]),t(\"p\",[e._v(\"Install the release and configure:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" dpkg -i secretnetwork_0.2.0_amd64.deb \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# install secretd & secretcli and setup secret-node.service\")]),e._v(\"\\n\\n\")])])]),t(\"p\",[e._v(\"Verify the package version for the Secret Network:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"secretcli version --long\\n\")])])]),t(\"p\",[e._v(\"Below is the version information for the Secret Network.\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"name\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"SecretNetwork\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"server_name\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"secretd\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"client_name\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"secretcli\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"version\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"0.2.0-220-g3d4eb01\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"commit\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"3d4eb015191ff8d7c5754f4588e0aabff20a1ab5\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"build_tags\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"ledger\"')]),e._v(\",\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"go\"')]),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\":\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"go version go1.14.4 linux/amd64\"')]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])])]),t(\"p\",[e._v(\"Configure the node:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"secretcli config chain-id secret-1\\nsecretcli config output json\\nsecretcli config indent \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[e._v(\"true\")]),e._v(\"\\nsecretcli config trust-node \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[e._v(\"true\")]),e._v(\"\\n\")])])]),t(\"h3\",{attrs:{id:\"_4-setup-the-new-node-validator\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-setup-the-new-node-validator\"}},[e._v(\"#\")]),e._v(\" 4. Setup the new Node/Validator:\")]),e._v(\" \"),t(\"p\",[e._v(\"Get the new \"),t(\"code\",[e._v(\"secret-1\")]),e._v(\" genesis file (this will be provided by CoS after Step #2 is completed):\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"wget\")]),e._v(\" https://raw.githubusercontent.com/chainofsecrets/TheRomulusUpgrade/romulus-upgrade/secret-1-genesis.json\\n\")])])]),t(\"p\",[e._v(\"Validate the genesis file (replace <sha256sum> with the checksum provided by CoS after Step #2 is completed):\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"echo\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"6291811bafcbebb44d93b34422cec683a04f7b168ccbe8965392ff73bfc46c39 secret-1-genesis.json\"')]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" sha256sum --check\\n\")])])]),t(\"p\",[e._v(\"Initialize and configure \"),t(\"code\",[e._v(\"secretd\")]),e._v(' with a placeholder moniker \"blabla\" because it will be overwritten with the correct '),t(\"code\",[e._v(\"app.toml\")]),e._v(\" file:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"secretd init blabla --chain-id secret-1\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" ~/.secretd/config/\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"app.toml,config.toml,addrbook.json\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\" ~/.secretd/config\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" ~/.secretd/config/\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"priv_validator_key.json,node_key.json\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\" ~/.secretd/config\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# set new_genesis.json from step 3 as the genesis.json of the new chain\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" secret-1-genesis.json ~/.secretd/config/genesis.json\\n\")])])]),t(\"h3\",{attrs:{id:\"_5-start-the-new-secret-node\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-start-the-new-secret-node\"}},[e._v(\"#\")]),e._v(\" 5. Start the new Secret Node! 🎉\")]),e._v(\" \"),t(\"p\",[e._v(\"Enable the new node and start:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"enable\")]),e._v(\" secret-node\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl start secret-node\\n\")])])]),t(\"p\",[e._v(\"Once more than 2/3 of voting power comes online you'll start seeing blocks streaming on:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"journalctl -u secret-node -f\\n\")])])]),t(\"p\",[e._v(\"If something goes wrong the network can relaunch the \"),t(\"code\",[e._v(\"enigma-node\")]),e._v(\", therefore it's not advisable to delete \"),t(\"code\",[e._v(\"~/.secretd\")]),e._v(\" & \"),t(\"code\",[e._v(\"~/.secretcli\")]),e._v(\" until\\nthe new chain is live and stable.\")]),e._v(\" \"),t(\"h3\",{attrs:{id:\"_6-import-wallet-keys\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-import-wallet-keys\"}},[e._v(\"#\")]),e._v(\" 6. Import Wallet Keys\")]),e._v(\" \"),t(\"p\",[e._v(\"(Ledger Nano S/X users shouldn't do anything, just use the new CLI with \"),t(\"code\",[e._v(\"--ledger --account <number>\")]),e._v(\" as usual)\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"secretcli keys \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"key_name\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# this^ outputs stuff to stderr and also exports the key to stderr,\")]),e._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# so copy only the private key output to a file named `key.export`\")]),e._v(\"\\n\\nsecretcli keys \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"import\")]),e._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"key_name\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" key.export\\n\")])])]),t(\"h3\",{attrs:{id:\"_7-remove-old-chain\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7-remove-old-chain\"}},[e._v(\"#\")]),e._v(\" 7. Remove Old Chain\")]),e._v(\" \"),t(\"p\",[e._v(\"When the \"),t(\"code\",[e._v(\"secret-1\")]),e._v(\" chain is live and stable, you can delete the files of the old \"),t(\"code\",[e._v(\"enigma-1\")]),e._v(\" chain:\")]),e._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[e._v(\"sudo systemctl disable enigma-node\")])]),e._v(\" \"),t(\"li\",[t(\"code\",[e._v(\"rm -rf ~/.secretd\")])]),e._v(\" \"),t(\"li\",[t(\"code\",[e._v(\"rm -rf ~/.secretcli\")])]),e._v(\" \"),t(\"li\",[t(\"code\",[e._v(\"sudo dpkg -r enigma-blockchain\")])])]),e._v(\" \"),t(\"p\",[e._v(\"Reset the configured halt height to 0 in \"),t(\"code\",[e._v(\"app.toml\")]),e._v(\" and restart the node:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[e._v(\"perl -i -pe \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'s/^halt-height =.*/halt-height = 0/'\")]),e._v(\" ~/.secretd/config/app.toml\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl restart secret-node\\n\")])])]),t(\"h2\",{attrs:{id:\"addendum\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#addendum\"}},[e._v(\"#\")]),e._v(\" \"),t(\"a\",{attrs:{name:\"#addendum\"}}),e._v(\"Addendum\")]),e._v(\" \"),t(\"p\",[e._v(\"See the \"),t(\"RouterLink\",{attrs:{to:\"/upgrades/romulus-migrate-genesis.html\"}},[e._v(\"Migrate Genesis instructions\")]),e._v(\".\")],1)])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}