{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{416:function(e,t,a){\"use strict\";a.r(t);var n=a(42),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"migrate-a-validator\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#migrate-a-validator\"}},[e._v(\"#\")]),e._v(\" Migrate a Validator\")]),e._v(\" \"),a(\"p\",[e._v(\"⚠️ ⚠️ ⚠️\")]),e._v(\" \"),a(\"p\",[e._v(\"Please make sure you \"),a(\"RouterLink\",{attrs:{to:\"/testnet/run-full-node-testnet.html\"}},[e._v(\"backup your validator\")]),e._v(\" before you migrate it.\")],1),e._v(\" \"),a(\"h3\",{attrs:{id:\"_1-run-a-new-full-node-on-a-new-machine\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-run-a-new-full-node-on-a-new-machine\"}},[e._v(\"#\")]),e._v(\" 1. \"),a(\"RouterLink\",{attrs:{to:\"/testnet/run-full-node-testnet.html\"}},[e._v(\"Run a new full node\")]),e._v(\" on a new machine.\")],1),e._v(\" \"),a(\"h3\",{attrs:{id:\"_2-confirm-you-have-the-recovery-seed-phrase-information-for-the-active-key-running-on-the-old-machine\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-confirm-you-have-the-recovery-seed-phrase-information-for-the-active-key-running-on-the-old-machine\"}},[e._v(\"#\")]),e._v(\" 2. Confirm you have the recovery seed phrase information for the active key running on the old machine\")]),e._v(\" \"),a(\"p\",[e._v(\"You can also back it up with:\")]),e._v(\" \"),a(\"p\",[e._v(\"On the validator node on the old machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"secretcli keys \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" mykey\\n\")])])]),a(\"p\",[e._v(\"This prints the private key to \"),a(\"code\",[e._v(\"stderr\")]),e._v(\", you can then paste in into the file \"),a(\"code\",[e._v(\"mykey.backup\")]),e._v(\".\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"_3-recover-the-active-key-of-the-old-machine-on-the-new-machine\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-recover-the-active-key-of-the-old-machine-on-the-new-machine\"}},[e._v(\"#\")]),e._v(\" 3. Recover the active key of the old machine on the new machine\")]),e._v(\" \"),a(\"p\",[e._v(\"This can be done with the mnemonics:\")]),e._v(\" \"),a(\"p\",[e._v(\"On the full node on the new machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"secretcli keys \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"add\")]),e._v(\" mykey --recover\\n\")])])]),a(\"p\",[e._v(\"Or with the backup file \"),a(\"code\",[e._v(\"mykey.backup\")]),e._v(\" from the previous step:\")]),e._v(\" \"),a(\"p\",[e._v(\"On the full node on the new machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"secretcli keys \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"import\")]),e._v(\" mykey mykey.backup\\n\")])])]),a(\"h3\",{attrs:{id:\"_4-wait-for-the-new-full-node-on-the-new-machine-to-finish-catching-up\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-wait-for-the-new-full-node-on-the-new-machine-to-finish-catching-up\"}},[e._v(\"#\")]),e._v(\" 4. Wait for the new full node on the new machine to finish catching-up.\")]),e._v(\" \"),a(\"p\",[e._v(\"To check on the new full node if it finished catching-up:\")]),e._v(\" \"),a(\"p\",[e._v(\"On the full node on the new machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"secretcli status \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" jq .sync_info\\n\")])])]),a(\"p\",[e._v(\"(\"),a(\"code\",[e._v(\"catching_up\")]),e._v(\" should equal \"),a(\"code\",[e._v(\"false\")]),e._v(\")\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"_5-after-the-new-node-have-caught-up-stop-the-validator-node-and-then-stop-the-new-full-node\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-after-the-new-node-have-caught-up-stop-the-validator-node-and-then-stop-the-new-full-node\"}},[e._v(\"#\")]),e._v(\" 5. After the new node have caught-up, stop the validator node and then stop the new full node.\")]),e._v(\" \"),a(\"p\",[e._v(\"To prevert double signing, you should stop the validator node and only then stop the new full node.\")]),e._v(\" \"),a(\"p\",[e._v(\"Please read about \"),a(\"RouterLink\",{attrs:{to:\"/validators-and-full-nodes/join-validator-mainnet.html#dangers-in-running-a-validator\"}},[e._v(\"the dangers in running a validator\")]),e._v(\".\")],1),e._v(\" \"),a(\"p\",[e._v(\"On the validator node on the old machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl stop secret-node\\n\")])])]),a(\"p\",[e._v(\"On the full node on the new machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl stop secret-node\\n\")])])]),a(\"h3\",{attrs:{id:\"_6-move-the-validator-s-private-key-from-the-old-machine-to-the-new-machine\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-move-the-validator-s-private-key-from-the-old-machine-to-the-new-machine\"}},[e._v(\"#\")]),e._v(\" 6. Move the validator's private key from the old machine to the new machine.\")]),e._v(\" \"),a(\"p\",[e._v(\"On the old machine the file is \"),a(\"code\",[e._v(\"~/.secretd/config/priv_validator_key.json\")]),e._v(\".\")]),e._v(\" \"),a(\"p\",[e._v(\"You can copy it manually or for example you can copy the file to the new machine using ssh:\")]),e._v(\" \"),a(\"p\",[e._v(\"On the validator node on the old machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"scp\")]),e._v(\" ~/.secretd/config/priv_validator_key.json ubuntu@new_machine_ip:~/.secretd/config/priv_validator_key.json\\n\")])])]),a(\"h3\",{attrs:{id:\"_7-on-the-new-server-start-the-new-full-node-which-is-now-your-validator-node\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7-on-the-new-server-start-the-new-full-node-which-is-now-your-validator-node\"}},[e._v(\"#\")]),e._v(\" 7. On the new server start the new full node which is now your validator node.\")]),e._v(\" \"),a(\"p\",[e._v(\"On the new machine:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" systemctl start secret-node\\n\")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);","extractedComments":[]}