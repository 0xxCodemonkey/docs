(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{389:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"secret-contracts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secret-contracts"}},[t._v("#")]),t._v(" Secret Contracts")]),t._v(" "),a("p",[t._v("Secret Contracts are the first implementation of general purpose privacy preserving computations on public blockchain. While similar to Ethereum smart contracts in design, Secret Contracts work with encrypted data (inputs, encrypted outputs and encrypted state). These privacy guarantees are made possible by a decentralized network of validators, who run Secret Contracts execution inside Trusted Execution Environments (TEEs).")]),t._v(" "),a("p",[t._v("Secret Contracts are Rust based smart contracts that compile to WebAssembly. Secret Contracts, which are based on "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/tree/master/go-cosmwasm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go-CosmWasm"),a("OutboundLink")],1),t._v(", introduce the "),a("em",[t._v("compute")]),t._v(" module that runs inside the TEE to enable secure data processing (inputs, outputs and contract state.")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/15679491/99459758-9a44c580-28fc-11eb-9af2-82479bbb2d23.png",alt:"architecture"}})]),t._v(" "),a("p",[t._v("Next, we will go through steps to:")]),t._v(" "),a("ul",[a("li",[t._v("install Rust")]),t._v(" "),a("li",[t._v("install the Rust dependencies")]),t._v(" "),a("li",[t._v("create your first project")])]),t._v(" "),a("p",[t._v("The Rust dependencies include the Rust compiler, cargo ("),a("em",[t._v("package manager")]),t._v("), toolchain and a package to generate projects. You can check out the Rust book, rustlings course, examples and more "),a("a",{attrs:{href:"https://www.rust-lang.org/learn",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("ol",[a("li",[t._v("Install Rust")])]),t._v(" "),a("p",[t._v("More information about installing Rust can be found here: https://www.rust-lang.org/tools/install.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\nsource $HOME/.cargo/env\n")])])]),a("p",[a("strong",[t._v("Update the rust compiler")])]),t._v(" "),a("p",[t._v("In case rust is installed already, make sure to update the rust compiler.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("rustup update\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Add rustup target wasm32 for both stable and nightly")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("rustup default stable\nrustup target list --installed\nrustup target add wasm32-unknown-unknown\n\nrustup install nightly\nrustup target add wasm32-unknown-unknown --toolchain nightly\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("If using linux, install the standard build tools:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("apt install build-essential\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Run cargo install cargo-generate")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.rs/crate/cargo-generate/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cargo generate"),a("OutboundLink")],1),t._v(" is the tool you'll use to create a secret contract project.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo install cargo-generate --features vendored-openssl\n")])])]),a("h3",{attrs:{id:"create-your-first-secret-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-your-first-secret-contract"}},[t._v("#")]),t._v(" Create your first Secret Contract")]),t._v(" "),a("ol",[a("li",[t._v("generate the initial project")]),t._v(" "),a("li",[t._v("compile the secret contract")]),t._v(" "),a("li",[t._v("run unit tests")]),t._v(" "),a("li",[t._v("optimize the wasm contract bytecode to prepare for deployment")]),t._v(" "),a("li",[t._v("deploy the secret contract to your local Secret Network")]),t._v(" "),a("li",[t._v("instantiate it with contract parameters")])]),t._v(" "),a("h4",{attrs:{id:"generate-the-secret-contract-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generate-the-secret-contract-project"}},[t._v("#")]),t._v(" Generate the Secret Contract Project")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo generate --git https://github.com/enigmampc/secret-template --name mysimplecounter\n")])])]),a("p",[t._v("The git project above is a secret contract template that implements a simple counter. The contract is created with a parameter for the initial count and allows subsequent incrementing.")]),t._v(" "),a("p",[t._v("Change directory to the project you created and view the structure and files that were created.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd mysimplecounter\n")])])]),a("p",[t._v("The generate creates a directory with the project name and has this structure:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Cargo.lock\tDeveloping.md\tLICENSE\t\tPublishing.md\texamples\tschema\t\ttests\nCargo.toml\tImporting.md\tNOTICE\t\tREADME.md\trustfmt.toml\tsrc\n")])])]),a("p",[t._v("As an example secret contract, "),a("code",[t._v("mysimplecounter")]),t._v(", handles a state keeping track of a number which may be incremented by any address, but only reset by the creator.")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("src")]),t._v(" folder contains the following files:")]),t._v(" "),a("h5",{attrs:{id:"contract-rs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-rs"}},[t._v("#")]),t._v(" "),a("code",[t._v("contract.rs")])]),t._v(" "),a("p",[t._v("This file contains functions which define the available contract operations. The functions which all secret contracts contain will be: "),a("code",[t._v("init")]),t._v(", "),a("code",[t._v("handle")]),t._v(", and "),a("code",[t._v("query")]),t._v(".")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("init")]),t._v(" is called once at instantiation of the secret contract with 3 parameters: "),a("code",[t._v("deps")]),t._v(", "),a("code",[t._v("env")]),t._v(", and "),a("code",[t._v("msg")]),t._v(". The internal state ("),a("code",[t._v("State")]),t._v(" struct imported from "),a("code",[t._v("state.rs")]),t._v(")of the secret contract is initialized with these parameters.")])]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" init"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Querier"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" Extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" InitMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" StdResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("InitResponse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" State "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        owner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("canonical_address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("InitResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/blob/master/cosmwasm/packages/std/src/traits.rs",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("deps")]),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/blob/master/cosmwasm/packages/std/src/types.rs",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("env")]),a("OutboundLink")],1),t._v(" are structs "),a("code",[t._v("Extern")]),t._v(" and "),a("code",[t._v("Env")]),t._v(" imported from "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/tree/master/cosmwasm/packages/std",target:"_blank",rel:"noopener noreferrer"}},[t._v("cosmwasm_std"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("deps")]),t._v(" contains all external dependencies of the contract.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" Extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Querier"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" querier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("env")]),t._v(" contains external state information of the contract.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" Env "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" BlockInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MessageInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ContractInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" contract_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Option"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[serde(default)]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" contract_code_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("BlockInfo")]),t._v(" defines the current block height, time, and chain-id.")]),t._v(" "),a("li",[a("code",[t._v("MessageInfo")]),t._v(" defines the address which instantiated the contract and possibly funds sent to the contract at instantiation.")]),t._v(" "),a("li",[a("code",[t._v("ContractInfo")]),t._v(" is the address of the contract instance.")]),t._v(" "),a("li",[a("code",[t._v("contract_key")]),t._v(" is the code-id used when instantiating the contract")]),t._v(" "),a("li",[a("code",[t._v("contract_code_hash")]),t._v(" is the hex encoded hash of the code. This is used by Secret Network to harden against replaying the contract. It is used to bind the request to a destination contract in a stronger way than just the contract address which can be faked")])]),t._v(" "),a("p",[a("code",[t._v("msg")]),t._v(" is the "),a("code",[t._v("InitMsg")]),t._v(" struct imported from "),a("code",[t._v("msg.rs")]),t._v(". In this case, it defines the initial state of the counter.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" InitMsg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The return value of "),a("code",[t._v("init")]),t._v("(if there are no errors) is an "),a("code",[t._v("InitResponse")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" InitResponse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("T "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Empty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("\n    T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Clone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("Debug "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" PartialEq "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" JsonSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CosmosMsg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("LogAttribute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("handle")]),t._v(" handles all incoming transactions. These computations occur on-chain.")])]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("msg")]),t._v(" parameter is the "),a("code",[t._v("HandleMsg")]),t._v(" struct imported from "),a("code",[t._v("msg.rs")]),t._v(". This struct defines the available operations, while the callable functions("),a("code",[t._v("try_increment")]),t._v(" and "),a("code",[t._v("try_reset")]),t._v(") are defined in "),a("code",[t._v("contract.rs")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" handle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Querier"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" Extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HandleMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" StdResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("HandleResponse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        HandleMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("Increment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("try_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        HandleMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("Reset "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("try_reset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" messages are off-chain computations.")])]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("msg")]),t._v(" parameter is the "),a("code",[t._v("QueryMsg")]),t._v(" struct imported from "),a("code",[t._v("msg.rs")]),t._v(". This struct defines the available operations, while the callable function("),a("code",[t._v("query_count")]),t._v(") is defined in "),a("code",[t._v("contract.rs")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Querier"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("Extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Q"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" QueryMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" StdResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Binary"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        QueryMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("GetCount "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("to_binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query_count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"state-rs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-rs"}},[t._v("#")]),t._v(" "),a("code",[t._v("state.rs")])]),t._v(" "),a("p",[t._v("The internal state is defined in this file, by the "),a("code",[t._v("State")]),t._v(" struct.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" State "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" owner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CanonicalAddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The state is saved in a "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/blob/master/cosmwasm/packages/std/src/traits.rs#L42-L72",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Storage")]),a("OutboundLink")],1),t._v(" struct.")]),t._v(" "),a("p",[t._v("This "),a("code",[t._v("Storage")]),t._v(" struct is wrapped in a "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/tree/master/cosmwasm/packages/storage#singleton",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Singleton")]),t._v(" and "),a("code",[t._v("ReadonlySingleton")]),a("OutboundLink")],1),t._v(". To learn more about the different types of storage, read the documentation for "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/tree/master/cosmwasm/packages/storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("cosmwasm_storage"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" Singleton"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" State"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("singleton")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CONFIG_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" config_read"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" ReadonlySingleton"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" State"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("singleton_read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CONFIG_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In this example, the state contains an integer "),a("code",[t._v("count")]),t._v(" and the "),a("code",[t._v("owner")]),t._v(" of the contract. "),a("code",[t._v("owner")]),t._v(" is an instance of the "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/blob/master/cosmwasm/packages/std/src/addresses.rs#L56-L88",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("CanonicalAddr")]),a("OutboundLink")],1),t._v(" struct. "),a("code",[t._v("Storage")]),t._v(" and "),a("code",[t._v("CanonicalAddr")]),t._v(" are imported from "),a("a",{attrs:{href:"https://github.com/enigmampc/SecretNetwork/tree/master/cosmwasm/packages/std",target:"_blank",rel:"noopener noreferrer"}},[t._v("cosmwasm_std"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h5",{attrs:{id:"msg-rs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#msg-rs"}},[t._v("#")]),t._v(" "),a("code",[t._v("msg.rs")])]),t._v(" "),a("p",[t._v("Contract computations are defined as messages. The "),a("a",{attrs:{href:"https://docs.rs/schemars/0.8.0/schemars/trait.JsonSchema.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonSchema"),a("OutboundLink")],1),t._v(" for these messages is defined in "),a("code",[t._v("msg.rs")]),t._v(".")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("InitMsg")]),t._v(" struct describes the "),a("code",[t._v("msg")]),t._v(" parameter passed to the contract "),a("code",[t._v("init")]),t._v(" function in "),a("code",[t._v("contract.rs")]),t._v(".")]),t._v(" "),a("p",[a("code",[t._v("HandleMsg")]),t._v(" and "),a("code",[t._v("QueryMsg")]),t._v(" are enums representing possible transaction or query computations. These enums are used to describe the "),a("code",[t._v("msg")]),t._v(" parameter for "),a("code",[t._v("handle")]),t._v(" and "),a("code",[t._v("query")]),t._v(" functions in "),a("code",[t._v("contract.rs")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" HandleMsg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Increment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Reset "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" i32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" QueryMsg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    GetCount "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Calls to "),a("code",[t._v("handle")]),t._v(" and "),a("code",[t._v("query")]),t._v(" can optionally provide a response. These response messages are defined as structs. In this example, the "),a("code",[t._v("query_count")]),t._v(" function in "),a("code",[t._v("contract.rs")]),t._v(" returns the "),a("code",[t._v("CountResponse")]),t._v(" struct.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" CountResponse "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"lib-rs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lib-rs"}},[t._v("#")]),t._v(" "),a("code",[t._v("lib.rs")])]),t._v(" "),a("p",[t._v("This file is essentially boilerplate that you shouldn't need to modify. It provides the necessary abstraction to interact with the wasmi VM and compile the contract to wasm.")]),t._v(" "),a("h4",{attrs:{id:"compile-the-secret-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compile-the-secret-contract"}},[t._v("#")]),t._v(" Compile the Secret Contract")]),t._v(" "),a("p",[t._v("Use the following command to compile the Secret Contract, which produces the wasm contract file.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo wasm\n")])])]),a("h4",{attrs:{id:"run-unit-tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-unit-tests"}},[t._v("#")]),t._v(" Run Unit Tests")]),t._v(" "),a("p",[a("em",[t._v("Tests in this template currently fail unless you have SGX enabled.")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("RUST_BACKTRACE=1 cargo unit-test\n")])])]),a("h4",{attrs:{id:"integration-tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#integration-tests"}},[t._v("#")]),t._v(" Integration Tests")]),t._v(" "),a("p",[t._v("The integration tests are under the "),a("code",[t._v("tests/")]),t._v(" directory and run as:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo integration-test\n")])])]),a("h4",{attrs:{id:"generate-msg-schemas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generate-msg-schemas"}},[t._v("#")]),t._v(" Generate Msg Schemas")]),t._v(" "),a("p",[t._v("We can also generate JSON Schemas that serve as a guide for anyone trying to use the contract, to specify which arguments they need.")]),t._v(" "),a("p",[t._v("Auto-generate msg schemas (when changed):")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo schema\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);